{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar options_1 = require(\"./options\");\nvar builder_1 = __importDefault(require(\"./builder\"));\nvar utils_1 = require(\"./utils\");\nvar Vibrant = /** @class */function () {\n  function Vibrant(_src, opts) {\n    this._src = _src;\n    this.opts = utils_1.assignDeep({}, Vibrant.DefaultOpts, opts);\n  }\n  Vibrant.use = function (pipeline) {\n    this._pipeline = pipeline;\n  };\n  Vibrant.from = function (src) {\n    return new builder_1.default(src);\n  };\n  Object.defineProperty(Vibrant.prototype, \"result\", {\n    get: function () {\n      return this._result;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Vibrant.prototype._process = function (image, opts) {\n    var quantizer = this.opts.quantizer;\n    image.scaleDown(this.opts);\n    var processOpts = options_1.buildProcessOptions(this.opts, opts);\n    return Vibrant._pipeline.process(image.getImageData(), processOpts);\n  };\n  Vibrant.prototype.palette = function () {\n    return this.swatches();\n  };\n  Vibrant.prototype.swatches = function () {\n    throw new Error('Method deprecated. Use `Vibrant.result.palettes[name]` instead');\n  };\n  Vibrant.prototype.getPalette = function () {\n    var _this = this;\n    var arg0 = arguments[0];\n    var arg1 = arguments[1];\n    var name = typeof arg0 === 'string' ? arg0 : 'default';\n    var cb = typeof arg0 === 'string' ? arg1 : arg0;\n    var image = new this.opts.ImageClass();\n    return image.load(this._src).then(function (image) {\n      return _this._process(image, {\n        generators: [name]\n      });\n    }).then(function (result) {\n      _this._result = result;\n      return result.palettes[name];\n    }).then(function (res) {\n      image.remove();\n      if (cb) {\n        cb(undefined, res);\n      }\n      return res;\n    }).catch(function (err) {\n      image.remove();\n      if (cb) {\n        cb(err);\n      }\n      return Promise.reject(err);\n    });\n  };\n  Vibrant.prototype.getPalettes = function () {\n    var _this = this;\n    var arg0 = arguments[0];\n    var arg1 = arguments[1];\n    var names = Array.isArray(arg0) ? arg0 : ['*'];\n    var cb = Array.isArray(arg0) ? arg1 : arg0;\n    var image = new this.opts.ImageClass();\n    return image.load(this._src).then(function (image) {\n      return _this._process(image, {\n        generators: names\n      });\n    }).then(function (result) {\n      _this._result = result;\n      return result.palettes;\n    }).then(function (res) {\n      image.remove();\n      if (cb) {\n        cb(undefined, res);\n      }\n      return res;\n    }).catch(function (err) {\n      image.remove();\n      if (cb) {\n        cb(err);\n      }\n      return Promise.reject(err);\n    });\n  };\n  Vibrant.DefaultOpts = {\n    colorCount: 64,\n    quality: 5,\n    filters: []\n  };\n  return Vibrant;\n}();\nexports.default = Vibrant;","map":{"version":3,"names":["options_1","require","builder_1","__importDefault","utils_1","Vibrant","_src","opts","assignDeep","DefaultOpts","use","pipeline","_pipeline","from","src","default","Object","defineProperty","prototype","get","_result","_process","image","quantizer","scaleDown","processOpts","buildProcessOptions","process","getImageData","palette","swatches","Error","getPalette","_this","arg0","arguments","arg1","name","cb","ImageClass","load","then","generators","result","palettes","res","remove","undefined","catch","err","Promise","reject","getPalettes","names","Array","isArray","colorCount","quality","filters"],"sources":["../../../../packages/vibrant-core/src/index.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;AAAA,IAAAA,SAAA,GAAAC,OAAA;AAMA,IAAAC,SAAA,GAAAC,eAAA,CAAAF,OAAA;AAEA,IAAAG,OAAA,GAAAH,OAAA;AAMA,IAAAI,OAAA;EAqBE,SAAAA,QAAqBC,IAAiB,EAAEC,IAAuB;IAA1C,KAAAD,IAAI,GAAJA,IAAI;IACvB,IAAI,CAACC,IAAI,GAAGH,OAAA,CAAAI,UAAU,CAAC,EAAE,EAAEH,OAAO,CAACI,WAAW,EAAEF,IAAI,CAAC;EACvD;EApBOF,OAAA,CAAAK,GAAG,GAAV,UAAYC,QAAkB;IAC5B,IAAI,CAACC,SAAS,GAAGD,QAAQ;EAC3B,CAAC;EAOMN,OAAA,CAAAQ,IAAI,GAAX,UAAaC,GAAgB;IAC3B,OAAO,IAAIZ,SAAA,CAAAa,OAAO,CAACD,GAAG,CAAC;EACzB,CAAC;EAEDE,MAAA,CAAAC,cAAA,CAAIZ,OAAA,CAAAa,SAAA,UAAM;SAAV,SAAAC,CAAA;MACE,OAAO,IAAI,CAACC,OAAO;IACrB,CAAC;;;;EAMOf,OAAA,CAAAa,SAAA,CAAAG,QAAQ,GAAhB,UACEC,KAAY,EACZf,IAA8B;IAExB,IAAAgB,SAAS,GAAK,IAAI,CAAChB,IAAI,CAAAgB,SAAd;IAEfD,KAAK,CAACE,SAAS,CAAC,IAAI,CAACjB,IAAI,CAAC;IAE1B,IAAIkB,WAAW,GAAGzB,SAAA,CAAA0B,mBAAmB,CAAC,IAAI,CAACnB,IAAI,EAAEA,IAAI,CAAC;IAEtD,OAAOF,OAAO,CAACO,SAAS,CAACe,OAAO,CAACL,KAAK,CAACM,YAAY,EAAE,EAAEH,WAAW,CAAC;EACrE,CAAC;EACDpB,OAAA,CAAAa,SAAA,CAAAW,OAAO,GAAP;IACE,OAAO,IAAI,CAACC,QAAQ,EAAE;EACxB,CAAC;EACDzB,OAAA,CAAAa,SAAA,CAAAY,QAAQ,GAAR;IACE,MAAM,IAAIC,KAAK,CACb,gEAAgE,CACjE;EACH,CAAC;EAID1B,OAAA,CAAAa,SAAA,CAAAc,UAAU,GAAV;IAAA,IAAAC,KAAA;IACE,IAAMC,IAAI,GAAGC,SAAS,CAAC,CAAC,CAAC;IACzB,IAAMC,IAAI,GAAGD,SAAS,CAAC,CAAC,CAAC;IACzB,IAAME,IAAI,GAAG,OAAOH,IAAI,KAAK,QAAQ,GAAGA,IAAI,GAAG,SAAS;IACxD,IAAMI,EAAE,GAAG,OAAOJ,IAAI,KAAK,QAAQ,GAAGE,IAAI,GAAGF,IAAI;IACjD,IAAIZ,KAAK,GAAG,IAAI,IAAI,CAACf,IAAI,CAACgC,UAAU,EAAE;IACtC,OAAOjB,KAAK,CACTkB,IAAI,CAAC,IAAI,CAAClC,IAAI,CAAC,CACfmC,IAAI,CAAC,UAAAnB,KAAK;MAAI,OAAAW,KAAI,CAACZ,QAAQ,CAACC,KAAK,EAAE;QAAEoB,UAAU,EAAE,CAACL,IAAI;MAAC,CAAE,CAAC;IAA5C,CAA4C,CAAC,CAC3DI,IAAI,CAAC,UAAAE,MAAM;MACVV,KAAI,CAACb,OAAO,GAAGuB,MAAM;MACrB,OAAOA,MAAM,CAACC,QAAQ,CAACP,IAAI,CAAC;IAC9B,CAAC,CAAC,CACDI,IAAI,CAAC,UAAAI,GAAG;MACPvB,KAAK,CAACwB,MAAM,EAAE;MACd,IAAIR,EAAE,EAAE;QACNA,EAAE,CAACS,SAAS,EAAEF,GAAG,CAAC;;MAEpB,OAAOA,GAAG;IACZ,CAAC,CAAC,CACDG,KAAK,CAAC,UAAAC,GAAG;MACR3B,KAAK,CAACwB,MAAM,EAAE;MACd,IAAIR,EAAE,EAAE;QACNA,EAAE,CAACW,GAAG,CAAC;;MAET,OAAOC,OAAO,CAACC,MAAM,CAACF,GAAG,CAAC;IAC5B,CAAC,CAAC;EACN,CAAC;EAMD5C,OAAA,CAAAa,SAAA,CAAAkC,WAAW,GAAX;IAAA,IAAAnB,KAAA;IACE,IAAMC,IAAI,GAAGC,SAAS,CAAC,CAAC,CAAC;IACzB,IAAMC,IAAI,GAAGD,SAAS,CAAC,CAAC,CAAC;IACzB,IAAMkB,KAAK,GAAGC,KAAK,CAACC,OAAO,CAACrB,IAAI,CAAC,GAAGA,IAAI,GAAG,CAAC,GAAG,CAAC;IAChD,IAAMI,EAAE,GAAGgB,KAAK,CAACC,OAAO,CAACrB,IAAI,CAAC,GAAGE,IAAI,GAAGF,IAAI;IAC5C,IAAIZ,KAAK,GAAG,IAAI,IAAI,CAACf,IAAI,CAACgC,UAAU,EAAE;IACtC,OAAOjB,KAAK,CACTkB,IAAI,CAAC,IAAI,CAAClC,IAAI,CAAC,CACfmC,IAAI,CAAC,UAAAnB,KAAK;MACT,OAAAW,KAAI,CAACZ,QAAQ,CAACC,KAAK,EAAE;QACnBoB,UAAU,EAAEW;OACb,CAAC;IAFF,CAEE,CACH,CACAZ,IAAI,CAAC,UAAAE,MAAM;MACVV,KAAI,CAACb,OAAO,GAAGuB,MAAM;MACrB,OAAOA,MAAM,CAACC,QAAQ;IACxB,CAAC,CAAC,CACDH,IAAI,CAAC,UAAAI,GAAG;MACPvB,KAAK,CAACwB,MAAM,EAAE;MACd,IAAIR,EAAE,EAAE;QACNA,EAAE,CAACS,SAAS,EAAEF,GAAG,CAAC;;MAEpB,OAAOA,GAAG;IACZ,CAAC,CAAC,CACDG,KAAK,CAAC,UAAAC,GAAG;MACR3B,KAAK,CAACwB,MAAM,EAAE;MACd,IAAIR,EAAE,EAAE;QACNA,EAAE,CAACW,GAAG,CAAC;;MAET,OAAOC,OAAO,CAACC,MAAM,CAACF,GAAG,CAAC;IAC5B,CAAC,CAAC;EACN,CAAC;EAzGM5C,OAAA,CAAAI,WAAW,GAAqB;IACrC+C,UAAU,EAAE,EAAE;IACdC,OAAO,EAAE,CAAC;IACVC,OAAO,EAAE;GACV;EAsGH,OAAArD,OAAC;CAAA,CAhHD;kBAAqBA,OAAO"},"metadata":{},"sourceType":"script","externalDependencies":[]}